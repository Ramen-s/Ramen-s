<div class="item-show">
  <!-- 左：ジャンル検索 -->
  <aside class="item-show__side">
    <div class="genre-box">
      <h2 class="genre-box__title">ジャンル検索</h2>
      <ul class="genre-box__list">
        <% @genres.each do |genre| %>
          <li><%= link_to genre.name, items_path(genre_id: genre.id) %></li>
        <% end %>
      </ul>
    </div>
  </aside>

  <!-- 右：商品詳細 -->
  <main class="item-show__main">
    <div class="item-detail">
      <!-- 画像 -->
      <div class="item-detail__image">
        <% if @item.image.attached? %>
          <%= image_tag @item.image, style: "width:100%; height:100%; object-fit:cover; display:block;" %>
        <% else %>
          <div class="item-detail__image-dummy" style="display:flex; align-items:center; justify-content:center; color:#777;">
            No Image
          </div>
        <% end %>
      </div>

      <div class="item-detail__info">
        <h2 class="item-detail__name"><%= @item.name %></h2>

        <p class="item-detail__intro"><%= @item.introduction %></p>

        <p class="item-detail__price">
          ¥ <%= @item.price %> <span class="item-detail__tax">(税込)</span>
        </p>

        <!-- カート追加フォーム -->
        <%= form_with url: cart_items_path, scope: :cart_item, method: :post, local: true do |f| %>
          <%= f.hidden_field :item_id, value: @item.id %>

          <div class="item-detail__actions">
            <div class="qty-select">
              <span class="qty-select__label">個数選択</span>
              <%= f.select :amount,
                    options_for_select((1..10).map { |n| [n, n] }),
                    { include_blank: true },
                    class: "qty-select__select" %>
            </div>

            <%= f.submit "カートに入れる", class: "item-detail__cart-btn" %>
          </div>
        <% end %>

      </div>
    </div>
  </main>
</div>
